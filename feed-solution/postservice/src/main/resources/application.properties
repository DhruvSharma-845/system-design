spring.application.name=postservice

# Database configuration
spring.datasource.url=${DB_URL:jdbc:postgresql://postgres:5432/postsdb}
spring.datasource.username=${DB_USERNAME:feedsvc}
spring.datasource.password=${DB_PASSWORD:feedsvcpass}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.flyway.enabled=true

# OAuth2 Resource Server - JWT validation (Keycloak)
# Only jwk-set-uri is set (no issuer-uri) to avoid issuer mismatch between
# localhost (port-forward) and cluster-internal (keycloak:8080) URLs.
# In production with a stable external hostname, add issuer-uri back.
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${KEYCLOAK_JWK_SET_URI:http://keycloak:8080/realms/feed/protocol/openid-connect/certs}

# User service URL (for resolving JWT sub â†’ internal user id)
feed.userservice.url=${USERSERVICE_URL:http://userservice:8082}

# Actuator (health checks for K8s probes)
management.endpoints.web.exposure.include=health,info
